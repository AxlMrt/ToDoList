(()=>{const e=document.getElementById("submitBtn"),t=document.getElementById("toDo-Form"),s=document.querySelector(".dueDate");storeTasks=JSON.parse(localStorage.getItem("storeTasks"))||[];class n{constructor(e,t,s){this.title=e,this.date=t,this.dueDate=s}}function a(){const e=document.querySelector(".container");e.innerHTML="",storeTasks.forEach((t=>{const s=document.createElement("div"),n=document.createElement("input"),d=document.createElement("div"),o=document.createElement("button"),r=document.createElement("button");s.classList.add("card"),n.setAttribute("type","checkbox"),n.classList.add("toDo-check"),d.classList.add("todoContent"),o.classList.add("editBtn"),r.classList.add("dltBtn"),d.innerHTML=`<input type=text value="${t.title}" id="cardInput" readonly> <p>${t.dueDate}</p>`,o.textContent="Edit",r.textContent="Delete",t.done&&s.classList.add("done"),n.addEventListener("change",(e=>{const n=d.querySelector("input");t.done=e.target.checked,localStorage.setItem("storeTasks",JSON.stringify(storeTasks)),t.done?(n.classList.add("done"),s.classList.add("doneCard")):(n.classList.remove("done"),s.classList.remove("doneCard"))})),o.addEventListener("click",(e=>{const s=d.querySelector("input");s.removeAttribute("readonly"),s.focus(),s.addEventListener("blur",(e=>{s.setAttribute("readonly",!0),t.title=e.target.value,localStorage.setItem("storeTasks",JSON.stringify(storeTasks)),a()}))})),r.addEventListener("click",(e=>{storeTasks=storeTasks.filter((e=>e!=t)),localStorage.setItem("storeTasks",JSON.stringify(storeTasks)),a()})),e.appendChild(s),s.appendChild(n),s.appendChild(d),s.appendChild(o),s.appendChild(r)}))}function d(e,t){return e.dueDate<t.dueDate?-1:e.dueDate>t.dueDate?1:0}e.addEventListener("click",(function(){const e=document.getElementById("title").value,t=document.getElementById("dueDate").value,s=new Date;if(document.getElementById("title").value="",""===e||""===t)return alert("Vous devez remplir les champs.");const d=new n(e,s,t);storeTasks.push(d),localStorage.setItem("storeTasks",JSON.stringify(storeTasks)),a()})),t.addEventListener("submit",(function(e){e.preventDefault()})),s.addEventListener("click",(()=>{storeTasks.sort(d),a()})),window.addEventListener("load",(()=>{!function(){const e=document.getElementById("nameInput"),t=localStorage.getItem("username")||"";e.value=t,e.addEventListener("change",(e=>{localStorage.setItem("username",e.target.value)}))}(),a()}))})();