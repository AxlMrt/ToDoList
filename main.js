(()=>{const e=document.getElementById("submitBtn"),t=document.getElementById("toDo-Form"),n=document.getElementById("sortTodo");let a=JSON.parse(localStorage.getItem("storeTasks"))||[];class s{constructor(e,t,n){this.title=e,this.inputDate=t,this.dueDate=n}}function d(){const e=document.querySelector(".container");e.innerHTML="",a.forEach((t=>{const n=document.createElement("div"),s=document.createElement("input"),o=document.createElement("div"),r=document.createElement("button"),l=document.createElement("button");if(n.classList.add("card"),s.setAttribute("type","checkbox"),s.classList.add("toDo-check"),o.classList.add("todoContent"),r.classList.add("editBtn"),l.classList.add("dltBtn"),o.innerHTML=`<input type=text value="${t.title}" id="cardInput" readonly> <p>${t.dueDate}</p>`,r.textContent="Edit",l.textContent="Delete",t.done){const e=o.querySelector("input");s.checked=!0,e.classList.add("done"),n.classList.add("doneCard")}s.addEventListener("change",(e=>{const s=o.querySelector("input");t.done=e.target.checked,t.done?(s.classList.add("done"),n.classList.add("doneCard")):(s.classList.remove("done"),n.classList.remove("doneCard")),localStorage.setItem("storeTasks",JSON.stringify(a))})),r.addEventListener("click",(e=>{const n=o.querySelector("input");n.removeAttribute("readonly"),n.focus(),n.addEventListener("blur",(e=>{n.setAttribute("readonly",!0),t.title=e.target.value,localStorage.setItem("storeTasks",JSON.stringify(a)),d()}))})),l.addEventListener("click",(e=>{a=a.filter((e=>e!=t)),localStorage.setItem("storeTasks",JSON.stringify(a)),d()})),e.appendChild(n),n.appendChild(s),n.appendChild(o),n.appendChild(r),n.appendChild(l)}))}function o(e,t){return e.dueDate<t.dueDate?-1:e.dueDate>t.dueDate?1:0}function r(e,t){return e.title<t.title?-1:e.title>t.title?1:0}e.addEventListener("click",(function(){const e=document.getElementById("title").value,t=document.getElementById("dueDate").value,n=new Date;if(document.getElementById("title").value="",""===e||""===t)return alert("Vous devez remplir les champs.");const o=new s(e,n,t);a.push(o),localStorage.setItem("storeTasks",JSON.stringify(a)),d()})),t.addEventListener("submit",(function(e){e.preventDefault()})),n.addEventListener("change",(e=>{"0"===e.target.value&&(a.sort(r),localStorage.setItem("storeTasks",JSON.stringify(a)),d()),"1"===e.target.value&&(a.sort(o),localStorage.setItem("storeTasks",JSON.stringify(a)),d())})),window.addEventListener("load",(()=>{!function(){const e=document.getElementById("nameInput"),t=localStorage.getItem("username")||"";e.value=t,e.addEventListener("change",(e=>{localStorage.setItem("username",e.target.value)}))}(),d()}))})();