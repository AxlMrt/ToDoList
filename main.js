(()=>{const e=document.getElementById("submitBtn"),t=document.getElementById("toDo-Form"),n=document.querySelector(".dueDate");let d=JSON.parse(localStorage.getItem("storeTasks"))||[];class a{constructor(e,t,n){this.title=e,this.date=t,this.dueDate=n}}function s(){const e=document.querySelector(".container");e.innerHTML="",d.forEach((t=>{const n=document.createElement("div"),a=document.createElement("input"),o=document.createElement("div"),c=document.createElement("button"),r=document.createElement("button");if(n.classList.add("card"),a.setAttribute("type","checkbox"),a.classList.add("toDo-check"),o.classList.add("todoContent"),c.classList.add("editBtn"),r.classList.add("dltBtn"),o.innerHTML=`<input type=text value="${t.title}" id="cardInput" readonly> <p>${t.dueDate}</p>`,c.textContent="Edit",r.textContent="Delete",t.done){const e=o.querySelector("input");a.checked=!0,e.classList.add("done"),n.classList.add("doneCard")}a.addEventListener("change",(e=>{const a=o.querySelector("input");t.done=e.target.checked,t.done?(a.classList.add("done"),n.classList.add("doneCard")):(a.classList.remove("done"),n.classList.remove("doneCard")),localStorage.setItem("storeTasks",JSON.stringify(d))})),c.addEventListener("click",(e=>{const n=o.querySelector("input");n.removeAttribute("readonly"),n.focus(),n.addEventListener("blur",(e=>{n.setAttribute("readonly",!0),t.title=e.target.value,localStorage.setItem("storeTasks",JSON.stringify(d)),s()}))})),r.addEventListener("click",(e=>{d=d.filter((e=>e!=t)),localStorage.setItem("storeTasks",JSON.stringify(d)),s()})),e.appendChild(n),n.appendChild(a),n.appendChild(o),n.appendChild(c),n.appendChild(r)}))}function o(e,t){return e.dueDate<t.dueDate?-1:e.dueDate>t.dueDate?1:0}e.addEventListener("click",(function(){const e=document.getElementById("title").value,t=document.getElementById("dueDate").value,n=new Date;if(document.getElementById("title").value="",""===e||""===t)return alert("Vous devez remplir les champs.");const o=new a(e,n,t);d.push(o),localStorage.setItem("storeTasks",JSON.stringify(d)),s()})),t.addEventListener("submit",(function(e){e.preventDefault()})),n.addEventListener("click",(()=>{d.sort(o),localStorage.setItem("storeTasks",JSON.stringify(d)),s()})),window.addEventListener("load",(()=>{!function(){const e=document.getElementById("nameInput"),t=localStorage.getItem("username")||"";e.value=t,e.addEventListener("change",(e=>{localStorage.setItem("username",e.target.value)}))}(),s()}))})();